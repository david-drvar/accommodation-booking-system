<!DOCTYPE html>
<html lang="en">
<head>
	<title>Booking</title>
	<meta charset="utf-8"/>
	<style>
		.errorMsg {
			color: #ce5858;
		}
	</style>

    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBgc06_91-XPMZMnOGQ-IYHVFSyzjQkjfc&callback=initAutocomplete&libraries=places&v=weekly"
            defer
    ></script>
    <link rel="stylesheet" type="text/css" href="./style.css" />

	<link rel="stylesheet" type="text/css" href="bootstrap-4.5.1-dist/css/bootstrap.min.css">
</head>
<body>

  <div id="app">
        <ul class="nav nav-tabs" v-bind:class="{collapse: userType !== 'ADMIN'}">
            <li>
                <a class="navbar-brand" href="#/">
                    <img src="pics/kim-kardashian.jpg" width="30" height="30" class="d-inline-block align-top" alt="">
                    Booking
                </a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Users</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="#/users">All users</a>
                    <a class="dropdown-item" href="#/register-host">Register host</a>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#/apartments">Apartments</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Reservations</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#/amenities">Amenities</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Apartment comments</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="javascript:;" data-toggle="modal" data-target="#profileModal">Account</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Search apartments</a>
            </li>
            <li>
                <a class="nav-link" href='javascript:;' v-on:click="logout">
                    Logout
                </a>
            </li>
        </ul>

      <ul class="nav nav-tabs" v-bind:class="{collapse: userType !== 'HOST'}">
          <li>
              <a class="navbar-brand" href="#/">
                  <img src="pics/kim-kardashian.jpg" width="30" height="30" class="d-inline-block align-top" alt="">
                  Booking
              </a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="#/apartments">Apartments</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="#">Reservations</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="#">Comments</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="#">Amenities</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="javascript:;" data-toggle="modal" data-target="#profileModal">Account</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="#">Search apartments</a>
          </li>
          <li>
              <a class="nav-link" href='javascript:;' v-on:click="logout">
                  Logout
              </a>
          </li>
      </ul>

      <ul class="nav nav-tabs" v-bind:class="{collapse: userType !== 'GUEST'}">
          <li>
              <a class="navbar-brand" href="#/">
                  <img src="pics/kim-kardashian.jpg" width="30" height="30" class="d-inline-block align-top" alt="">
                  Booking
              </a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="#">Apartments</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="#">Reservations</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="javascript:;" data-toggle="modal" data-target="#profileModal">Account</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="#">Search apartments</a>
          </li>
          <li>
              <a class="nav-link" href='javascript:;' v-on:click="logout">
                  Logout
              </a>
          </li>
      </ul>

      <ul class="nav nav-tabs" v-bind:class="{collapse: userType !== 'BROWSE'}">
          <li>
              <a class="navbar-brand" href="#/">
                  <img src="pics/kim-kardashian.jpg" width="30" height="30" class="d-inline-block align-top" alt="">
                  Booking
              </a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="#">Search apartments</a>
          </li>
          <li>
              <a class="nav-link" href='javascript:;' data-toggle="modal" data-target="#registerModal">
                  Register
              </a>
          </li>
          <li>
              <a class="nav-link" href='javascript:;' data-toggle="modal" data-target="#loginModal">
                  Login
              </a>
          </li>
      </ul>
      <router-view></router-view>
  </div>

    <div>
<!--        <br/><br/>-->
<!--        <div class="row">-->
<!--            <div class="col-lg-7"></div>-->
<!--            <div class="col-lg-2">-->
<!--                <button class="btn btn-outline-primary btn-block" data-toggle="modal" data-target="#registerModal">Registration</button>-->
<!--            </div>-->
<!--            <div class="col-lg-2">-->
<!--                <button type="button" class="btn btn-outline-primary btn-block"-->
<!--                        data-toggle="modal" data-target="#loginModal">-->
<!--                    Log in-->
<!--                </button>-->
<!--            </div>-->
<!--            <div class="col-lg-2" id="logout">-->
<!--                <button type="button" class="btn btn-outline-primary btn-block" v-on:click="logout" data-target="#logout">-->
<!--                    Logout-->
<!--                </button>-->
<!--            </div>-->
<!--	</div>-->
	<div class="modal fade" id="loginModal" role="dialog">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Log in</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"
							v-on:click="resetValidation">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
                    <div class="alert alert-danger" role="alert" v-if="loginErr">
                        Username or password are incorrect.
                    </div>
					<div class="form-group">
						<small class="errorMsg">{{userErr}}</small>
						<input id="user" type="text" class="form-control" placeholder="username"
							   data-toggle="tooltip" title="Enter your username" data-placement="right"
							   v-on:focusout="requiredUsername" v-on:keydown="requiredUsername"
							   v-model="user.username">
					</div>
					<div class="form-group">
						<small class="errorMsg">{{passErr}}</small>
						<input id="pass" type="password" class="form-control" placeholder="password"
							   data-toggle="tooltip" title="Enter your password" data-placement="right"
							   v-on:focusout="requiredPassword" v-on:keydown="requiredPassword"
							   v-model="user.password">
					</div>
					<div class="form-group form-check">
						<label class="form-check-label">
							<input class="form-check-input" type="checkbox"> Remember me
						</label>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary"
							v-on:click="fetchUser"
							v-bind:disabled="user.username === '' || user.password === ''">Log in</button>
					<button type="button" class="btn btn-secondary" data-dismiss="modal"
							v-on:click="resetValidation">Close</button>
				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" id="registerModal" role="dialog">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Register</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"
							v-on:click="resetValidation">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="form-group">
						<small class="errorMsg">{{firstNameErr}}</small>
						<input id="firstName" type="text" class="form-control" placeholder="first name"
							   data-toggle="tooltip" title="Enter first name" data-placement="right"
							   v-on:focusout="reguiredFirstName" v-on:keyup="reguiredFirstName"
							   v-model="user.firstName">
					</div>
					<div class="form-group">
						<small class="errorMsg">{{lastNameErr}}</small>
						<input id="lastName" type="text" class="form-control" placeholder="last name"
							   data-toggle="tooltip" title="Enter last name" data-placement="right"
							   v-on:focusout="requiredLastName"  v-on:keyup="requiredLastName"
							   v-model="user.lastName">
					</div>
					<div class="form-group">
						<small class="errorMsg">{{sexErr}}</small>
						<select id="sex" type="text" class="form-control"
								v-on:focusout="requiredSex"  v-on:keyup="requiredSex"
								v-model="user.sex">
							<option value="" disabled selected>select sex</option>
							<option value="MALE">male</option>
							<option value="FEMALE">female</option>
							<option value="OTHER">other</option>
						</select>
					</div>
					<div class="form-group">
						<small class="errorMsg">{{userErr}}</small>
						<input id="usernameRegister" type="text" class="form-control" placeholder="username"
							   data-toggle="tooltip" title="Enter username" data-placement="right"
							   v-on:focusout="checkUniqueUsername" v-on:keyup="requiredUsername"
							   v-model="user.username">
					</div>
					<div class="form-group">
						<small class="errorMsg">{{passErr}}</small>
						<input id="passwordRegister" type="password" class="form-control" placeholder="password"
							   data-toggle="tooltip" title="Enter password" data-placement="right"
							   v-on:focusout="requiredPassword"  v-on:keyup="requiredPassword"
							   v-model="user.password">
					</div>
					<div class="form-group">
						<small class="errorMsg">{{repeatPassErr}}</small>
						<input id="repeatPasswordRegister" type="password" class="form-control" placeholder="repeat password"
							   data-toggle="tooltip" title="Repeat password" data-placement="right"
							   v-on:focusout="requiredRepeatPassword"  v-on:keyup="requiredRepeatPassword"
							   v-model="user.repeatPassword"
						>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary"
							v-on:click="registerUser"
							v-bind:disabled="user.username === '' || user.password === '' || user.firstName ==='' || user.lastName === '' || user.sex === '' || user.repeatPassword!== user.password || userErr!==''">Register</button>
					<button type="button" class="btn btn-secondary" data-dismiss="modal"
							v-on:click="resetValidation">Close</button>
				</div>
			</div>
		</div>
	</div>
</div>

  <div class="modal fade" id="profileModal" role="dialog">
      <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
              <div class="modal-header">
                  <h5 class="modal-title">Your Account <span class="badge badge-primary">{{user.userType}}</span></h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                          v-on:click="cancelEditing">
                      <span aria-hidden="true">&times;</span>
                  </button>
              </div>
              <div class="modal-body">
                  <div>
                  <div class="container-fluid" v-if="!edit">
                      <div class="row">
                          <div class="col-lg-6">First name</div>
                          <div class="col-lg-6">{{user.firstName}}</div>
                      </div>
                      <br/>
                      <div class="row">
                          <div class="col-lg-6">Last name</div>
                          <div class="col-lg-6">{{user.lastName}}</div>
                      </div>
                      <br/>
                      <div class="row">
                          <div class="col-lg-6">Sex</div>
                          <div class="col-lg-6">{{user.sex}}</div>
                      </div>
                  </div>
                  <div class="container-fluid" v-if="edit">
                      <div class="row justify-content-end" v-if="firstNameErr">
                          <div class="col-lg-8">
                              <small class="errorMsg">First name can only contain characters.</small>
                          </div>
                      </div>
                      <div class="row">
                          <div class="col-lg-4">First name</div>
                          <div class="col-lg-8">
                              <input type="text" class="form-control" v-model="user.firstName"
                              v-on:keyup="validateFirstName">
                          </div>
                      </div>
                      <br/>
                      <div class="row justify-content-end" v-if="lastNameErr">
                          <div class="col-lg-8">
                              <small class="errorMsg">Last name can only contain characters.</small>
                          </div>
                      </div>
                      <div class="row">
                          <div class="col-lg-4">Last name</div>
                          <div class="col-lg-8">
                              <input type="text" class="form-control" v-model="user.lastName"
                                     v-on:keyup="validateLastName">
                          </div>
                      </div>
                      <br/>
                      <div class="row">
                          <div class="col-lg-4">Sex</div>
                          <div class="col-lg-8">
                              <select class="form-control" v-model="user.sex">
                                  <option>MALE</option>
                                  <option>FEMALE</option>
                                  <option>OTHER</option>
                              </select>
                          </div>
                      </div>
                      <br/>
                      <div class="row">
                          <button class="btn btn-outline-primary col-lg-6" type="button" data-toggle="collapse" data-target="#passChange" aria-expanded="false"
                          v-on:click="passChangeActive = !passChangeActive">
                              Password settings
                          </button>
                      </div>
                      <br/>
                      <div class="collapse row" id="passChange">
                          <div class="card-body border-primary">
                              <div class="row" v-if="currentPassErr">
                                  <div class="col-lg-8">
                                      <small class="errorMsg">Incorrect current password.</small>
                                  </div>
                              </div>
                              <div class="row">
                                  <input type="text" class="form-control" placeholder="Current password"
                                  v-model="user.password"
                                  v-on:focusout="currentPasswordCheck">
                              </div>
                              <br/>
                              <div class="row" v-if="newPassErr">
                                  <div class="col-lg-8">
                                      <small class="errorMsg">Password cannot be empty.</small>
                                  </div>
                              </div>
                              <div class="row">
                                  <input type="text" class="form-control" placeholder="New password"
                                         v-model="newPass"
                                         v-on:keyup="newPasswordCheck">
                              </div>
                              <br/>
                              <div class="row" v-if="matchingPassErr">
                                  <div class="col-lg-8">
                                      <small class="errorMsg">Password doesn't match the previous.</small>
                                  </div>
                              </div>
                              <div class="row">
                                  <input type="text" class="form-control" placeholder="Confirm password"
                                  v-model="repeatPass"
                                  v-on:focusout="matchingPasswordCheck" v-on:keyup="hiddenMatchingPasswordCheck">
                              </div>
                          </div>
                      </div>
                  </div>
                  </div>
          </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-primary"
                          v-if="!edit" v-on:click="editMode">Edit</button>
                  <button type="button" class="btn btn-primary" data-dismiss="modal"
                          v-if="edit" v-bind:disabled="firstNameErr || lastNameErr || (passChangeActive &&
                          (currentPassErr || newPassErr || matchingPassErr || hiddenMatchingPassErr
                          || newPass == null || repeatPass == null || user.password == null))"
                          v-on:click="editUser">Save</button>
                  <button type="button" class="btn btn-secondary" data-dismiss="modal"
                          v-on:click="cancelEditing">Close</button>
              </div>
          </div>
      </div>
  </div>

  <div aria-live="polite" aria-atomic="true" style="position: relative; min-height: 200px;" >
      <div class="toast" style="position: absolute; top: 0; right: 0;" id="editSuccess">
          <div class="toast-header">
              <img src="..." class="rounded mr-2" alt="...">
              <strong class="mr-auto">Bootstrap</strong>
              <small>11 mins ago</small>
              <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="toast-body">
              Hello, world! This is a toast message.
          </div>
      </div>
  </div>
<!--<br/>-->
<!--<br/>-->
<!--<div class="bg-primary" id="search">-->
<!--    <h1 class="p-4 text-light">Browse</h1>-->
<!--    <div class="p-4 bg-light" style="border-radius: 25px">-->
<!--        <div class="input-group">-->
<!--            <input type="date" class="form-control"-->
<!--                   data-toggle="tooltip" title="When is your arrival date?" data-placement="top">-->
<!--            <input type="date" class="form-control"-->
<!--                   data-toggle="tooltip" title="When is your returning date?" data-placement="top">-->
<!--            <input type="text" class="form-control" placeholder="location"-->
<!--                   data-toggle="tooltip" title="What country or city are you traveling to?" data-placement="top">-->
<!--            <select class="form-control" v-on:change="pullTowns">-->
<!--                <option value="" disabled selected>select state</option>-->
<!--                <option v-for="state in states" v-bind:value="state.id">-->
<!--                    {{state.name}}-->
<!--                </option>-->
<!--            </select>-->
<!--            <select class="form-control">-->
<!--                <option value="" disabled selected>select town</option>-->
<!--                <option v-for="town in towns" v-bind:value="town.name">-->
<!--                    {{town.name}}-->
<!--                </option>-->
<!--            </select>-->
<!--            <input type="number" min="0" class="form-control" placeholder="no of guests"-->
<!--                   data-toggle="tooltip" title="How many of you is coming?" data-placement="top">-->
<!--            <button class="btn btn-outline-info"-->
<!--                    data-toggle="tooltip" title="Show more filters" data-placement="top"-->
<!--                    v-bind:class="{invisible : moreFilters}" v-on:click="showMoreFilters">More</button>-->
<!--            <button class="btn btn-primary"-->
<!--                    v-bind:class="{invisible : moreFilters}">Search</button>-->
<!--        </div>-->
<!--        <div class="input-group" v-bind:class="{collapse : !moreFilters}">-->
<!--            <div class="input-group-prepend">-->
<!--                <span class="input-group-text">$</span>-->
<!--            </div>-->
<!--            <input type="number" min="0" class="form-control" placeholder="max price"-->
<!--                   data-toggle="tooltip" title="What is a maximal price you're willing to pay?" data-placement="bottom">-->
<!--            <div class="input-group-append">-->
<!--                <span class="input-group-text">.00</span>-->
<!--            </div>-->
<!--            <div class="input-group-prepend">-->
<!--                <span class="input-group-text">$</span>-->
<!--            </div>-->
<!--            <input type="number" min="0" class="form-control" placeholder="min price"-->
<!--                   data-toggle="tooltip" title="What is a minimal price you're willing to pay?" data-placement="bottom">-->
<!--            <div class="input-group-append">-->
<!--                <span class="input-group-text">.00</span>-->
<!--            </div>-->
<!--            <input type="number" min="0" class="form-control" placeholder="max rooms"-->
<!--                   data-toggle="tooltip" title="How many rooms do you need at the most?" data-placement="bottom">-->
<!--            <input type="number" min="0" class="form-control" placeholder="min rooms"-->
<!--                   data-toggle="tooltip" title="How many rooms do you need at the least?" data-placement="bottom">-->
<!--            <button class="btn btn-outline-info"-->
<!--                    data-toggle="tooltip" title="Show less filters" data-placement="top"-->
<!--                    v-on:click="showLessFilters">&nbspLess&nbsp</button>-->
<!--            <button class="btn btn-primary">Search</button>-->
<!--        </div>-->
<!--    </div>-->
<!--    <br/>-->
<!--    <br/>-->
<!--</div>-->

<!--<div class="text-light" style="background-color: orangered">-->
<!--    <h1 class="p-4">Trending</h1>-->
<!--    <div class="card-group pl-2 pr-2 pb-5 overflow-auto">-->
<!--        <div class="card">-->
<!--            <img class="card-img-top" src="pics/kim-kardashian.jpg" alt="Card image cap">-->
<!--            <div class="card-body text-primary">-->
<!--                <h5 class="card-title">Card title</h5>-->
<!--                <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>-->
<!--                <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div class="card">-->
<!--            <img class="card-img-top" src="pics/kim-kardashian.jpg" alt="Card image cap">-->
<!--            <div class="card-body text-primary">-->
<!--                <h5 class="card-title">Card title</h5>-->
<!--                <p class="card-text">This card has supporting text below as a natural lead-in to additional content.</p>-->
<!--                <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div class="card">-->
<!--            <img class="card-img-top" src="pics/kim-kardashian.jpg" alt="Card image cap">-->
<!--            <div class="card-body text-primary">-->
<!--                <h5 class="card-title">Card title</h5>-->
<!--                <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This card has even longer content than the first to show that equal height action.</p>-->
<!--                <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--  -->

<!--<table class="table table-hover" id="students">-->
<!--    <thead>-->
<!--    <tr>-->
<!--        <th scope="col">First name</th>-->
<!--        <th scope="col">Last name</th>-->
<!--        <th scope="col">Username</th>-->
<!--        <th scope="col">Sex</th>-->
<!--        <th scope="col">User type</th>-->
<!--    </tr>-->
<!--    </thead>-->
<!--    <tbody>-->
<!--    <tr v-for="s in students">-->
<!--        <td>{{s.firstName}}</td>-->
<!--        <td>{{s.lastName}}</td>-->
<!--        <td>{{s.username}}</td>-->
<!--        <td>{{s.sex}}</td>-->
<!--        <td>{{s.userType}}</td>-->
<!--    </tr>-->
<!--    </tbody>-->
<!--</table>-->

  <input
          id="pac-input"
          class="controls"
          type="text"
          placeholder="Search Box"
  />
  <div id="map"></div>



<script src="js/vue.js"></script>
<script src="js/vue-router.js"></script>
<script src="js/axios.js"></script>
<script src="js/jquery.min.js"></script>
<script src="js/toast.js"></script>
<script src="js/popper.min.js"></script>
<script src="bootstrap-4.5.1-dist/js/bootstrap.min.js"></script>
<script src="js/jwt-decode.min.js"></script>


<script src="login.js" ></script>
<script src="registration.js" ></script>
<script src="home.js"></script>
<script src="search.js"></script>
<script src="users.js" ></script>
<script src="apartments.js"></script>
<script src="logout.js"></script>
<script src="amenities.js"></script>
<script src="registerHost.js"></script>
<script src="profile.js"></script>
<script src="app.js"></script>
<script src="map.js"></script>

<script>
	$(document).ready(function(){
		$('[data-toggle="tooltip"]').tooltip();
	});
</script>
</body>
</html>